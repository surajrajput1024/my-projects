#!/bin/sh

echo "ğŸš€ Starting pre-commit checks..."

# Run lint-staged
echo "ğŸ§¹ Running lint-staged..."
pnpm lint-staged || {
  echo "âŒ lint-staged failed. Please fix the issues and try committing again."
  exit 1
}

# Run tests
# echo "ğŸ§ª Running tests..."
# pnpm test || {
#   echo "âŒ Tests failed. Please fix the failing tests and try committing again."
#   exit 1
# }

# Check for TODO comments
echo "ğŸ“ Checking for TODO comments..."
if grep -R --exclude-dir={node_modules,.git,.husky} 'TODO' .; then
  echo "ğŸ“Œ TODO comments found. Consider addressing them before committing."
fi

echo "âœ… Pre-commit checks completed successfully!"